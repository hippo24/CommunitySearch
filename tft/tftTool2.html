<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>TFT 챔피언 배치 툴</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">
	<script src="https://cdn.jsdelivr.net/npm/jquery@3.7.1/dist/jquery.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>

  <style>
    #board {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 5px;
      width: 100%;
      max-width: 700px;
      margin: auto;
    }
    .cell {
      width: 100px;
      height: 100px;
      background-color: white;
      border: 1px solid gainsboro;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .champion {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    .champion-pool {
      display: flex;
      gap: 10px;
      justify-content: center;
      margin-bottom: 20px;
    }
    .champion-pool img {
      width: 60px;
      height: 60px;
      cursor: grab;
      border: 2px solid gray;
      border-radius: 5px;
    }
  </style>
</head>
<body class="p-4">

  <div class="container">
    <h1 class="text-center mb-4">TFT 챔피언 배치</h1>

    <!-- 챔피언 여기에 다 넣기 -->
    <div class="champion-pool" id="champion-pool">
      
     
    </div>

    <!-- 보드 -->
    <div id="board">


    </div>

    <!-- 챔피언 정보-->
     <ul class="text-center mt-3" id="champ-info">
      <h3 id="champ-name"></h3>
      
     </ul>

  </div>

  <script>
    // 보드
    const board = document.getElementById("board");
    for (let i = 0; i < 28; i++) {
      const cell = document.createElement("div");
      cell.classList.add("cell");
      cell.dataset.index = i;
      board.appendChild(cell);
    }

    // 드래그
    let dragged = null;
    document.querySelectorAll(".champion").forEach(champ => {
      champ.addEventListener("dragstart", (e) => {
        dragged = e.target.id;
      });
    });



    // 드롭
    document.querySelectorAll(".cell").forEach(cell => {
    cell.addEventListener("dragover", (e) => e.preventDefault());

    cell.addEventListener("drop", (e) => {
      if (!dragged) return;

    // 챔피언 이미지
    const champImg = document.createElement("img");
    champImg.src = document.getElementById(dragged).src;
    champImg.classList.add("champion");

    // 우클릭 삭제
    champImg.addEventListener("contextmenu", (e) => {
      e.preventDefault(); 
      cell.innerHTML = ""; 
    });


    cell.innerHTML = "";
    cell.appendChild(champImg);

    dragged = null;
  });
});

let championData = {};

const champPool = document.getElementById("champion-pool");
fetch("14unit_data.json")
  .then(response => response.json())
  .then(data => {
    // JSON을 id 기반으로
    data.forEach((champ,index) => {
      const champImg = document.createElement("img");
      champImg.src = champ.image;
      champImg.alt = champ.name;
      champImg.name = champ.name;
      champImg.id = `champ${index + 1}`;
      champImg.draggable = true;
      champImg.classList.add("champion");

      champImg.addEventListener("dragstart", (e) => {
        dragged = e.target.id;
      });
      champPool.appendChild(champImg);
    });
  });



  </script>
</body>
</html>
